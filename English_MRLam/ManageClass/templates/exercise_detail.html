{% extends "base-admin.html" %}
{% block title %}Chi tiết bài tập{% endblock %}

{% block content %}
<div class="container">
    <h3 class="mb-3">Danh sách lớp học > Lớp {{ submission.userclass.classes.class_name }}</h3>
    <p><strong>Học viên:</strong> {{ submission.userclass.user.get_full_name }}</p>
    <p><strong>Ngày nộp:</strong> {{ submission.submit_date|date:"d/m/Y H:i" }}</p>
    <p><strong>Bài tập:</strong> {{ submission.exercise.lessondetail.lesson.lesson_name }}</p>

    <hr>
    <h5>Nội dung bài làm:</h5>
    <div class="border p-3 bg-light mb-4" style="min-height: 150px;">
        {{ submission.content|linebreaks }}
    </div>

    <form method="POST" id="redoForm">
        {% csrf_token %}
        <div id="reasonSection" class="mb-3" style="display: none;">
            <label for="reason" class="form-label">Lý do yêu cầu làm lại</label>
            <textarea name="reason" id="reason" rows="3" class="form-control" required></textarea>
        </div>
        <button type="button" class="btn btn-danger me-2" onclick="showReason()">Yêu cầu làm lại</button>
        <button type="submit" class="btn btn-dark" style="display: none;" id="saveBtn">Lưu</button>
    </form>
</div>

<script>
function showReason() {
    document.getElementById('reasonSection').style.display = 'block';
    document.getElementById('saveBtn').style.display = 'inline-block';
}
</script>
{% endblock %}
